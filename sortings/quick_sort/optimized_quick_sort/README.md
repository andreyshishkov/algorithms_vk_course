Дан массив целых чисел в диапазоне [0..10^9]. Размер массива кратен 10 и ограничен сверху значением 2 * 10^6 элементов. Все значения массива являются элементами псевдо-рандомной последовательности. Необходимо отсортировать элементы массива за минимально время с использованием быстрой сортировки и вывести каждый десятый элемент отсортированной последовательности через пробел.

Минимальный набор оптимизаций, который необходимо реализовать:

1. Оптимизация выбора опорного элемента.

2. Оптимизация концевой рекурсии.

Рекурсия отнимает много времени, т.к. каждый вызов функции - достаточно трудоемкая операция. Особенно часто рекурсивная функция сортировки QuickSort вызывается на маленьких подмассивах.
Под оптимизацией концевой рекурсии предполагается не доводить рекурсию до конца - до размера 1. А остановиться, если оставшийся размер исследуемого подмассива меньше некоторого порога. Например, 40. Затем можно отсортировать оставшиеся куски нерекурсивной сортировкой. Например, InsertionSort. Да, она квадратичная, но, как ни странно, будет работать быстрее на маленьких массивах.
Более того, InsertionSort можно вызывать не для каждого оставшегося куска отдельно, а вызвать InsertionSort один раз для всего массива.